<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="It’s ridiculous we don’t have a proper solution that uses Continuous Integration (CI) to grade homeworks hosted on GitHub. CI, in short, is just a server that runs unit tests on your code every time y">
<meta property="og:type" content="article">
<meta property="og:title" content="Using CircleCI to Grade Java Assignments">
<meta property="og:url" content="http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/index.html">
<meta property="og:site_name" content="Pandamonium">
<meta property="og:description" content="It’s ridiculous we don’t have a proper solution that uses Continuous Integration (CI) to grade homeworks hosted on GitHub. CI, in short, is just a server that runs unit tests on your code every time y">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://linanqiu.github.io/images/Using-CircleCI-to-Grade-Java-Assignments/circleci1.png">
<meta property="og:image" content="http://linanqiu.github.io/images/Using-CircleCI-to-Grade-Java-Assignments/circleci2.png">
<meta property="og:image" content="http://linanqiu.github.io/images/Using-CircleCI-to-Grade-Java-Assignments/circleci3.png">
<meta property="og:image" content="http://linanqiu.github.io/images/Using-CircleCI-to-Grade-Java-Assignments/circleci4.png">
<meta property="og:image" content="http://linanqiu.github.io/images/Using-CircleCI-to-Grade-Java-Assignments/circleci5.png">
<meta property="og:image" content="http://linanqiu.github.io/images/Using-CircleCI-to-Grade-Java-Assignments/circleci6.png">
<meta property="og:updated_time" content="2015-10-13T17:15:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Using CircleCI to Grade Java Assignments">
<meta name="twitter:description" content="It’s ridiculous we don’t have a proper solution that uses Continuous Integration (CI) to grade homeworks hosted on GitHub. CI, in short, is just a server that runs unit tests on your code every time y">
<meta name="twitter:image" content="http://linanqiu.github.io/images/Using-CircleCI-to-Grade-Java-Assignments/circleci1.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Using CircleCI to Grade Java Assignments</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/linanqiu">Projects</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2015/10/07/word2vec-sentiment/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2015/07/09/greece-cash/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&text=Using CircleCI to Grade Java Assignments"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&is_video=false&description=Using CircleCI to Grade Java Assignments"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Using CircleCI to Grade Java Assignments&body=Check out this article: http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&name=Using CircleCI to Grade Java Assignments&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#homework-assignment"><span class="toc-number">1.</span> <span class="toc-text">Homework Assignment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setting-up-circleci"><span class="toc-number">2.</span> <span class="toc-text">Setting up CircleCI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#game-plan"><span class="toc-number">3.</span> <span class="toc-text">Game Plan</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#overriding-circle.yml"><span class="toc-number">4.</span> <span class="toc-text">Overriding circle.yml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#creating-build.sh"><span class="toc-number">5.</span> <span class="toc-text">Creating build.sh</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#creating-a-grader-tool-in-java"><span class="toc-number">6.</span> <span class="toc-text">Creating a Grader Tool in Java</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pushing-to-github"><span class="toc-number">7.</span> <span class="toc-text">Pushing to GitHub</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setting-up-circleci-1"><span class="toc-number">8.</span> <span class="toc-text">Setting up CircleCI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#grade-on-commit"><span class="toc-number">9.</span> <span class="toc-text">Grade On Commit</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Using CircleCI to Grade Java Assignments
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Pandamonium</span>
      </span>
      
    <div class="postdate">
        <time datetime="2015-08-21T18:51:24.000Z" itemprop="datePublished">2015-08-21</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>It’s ridiculous we don’t have a proper solution that uses Continuous Integration (CI) to grade homeworks hosted on GitHub.</p>
<p>CI, in short, is just a server that runs unit tests on your code every time you commit it. That means instead of you having to run unit tests before your commit your code (or manually run them after you commit them), a little robot checks your code against your unit tests every time you commit the code. That little robot never gets tired, doesn’t need to be fed. In short, these little robots are way better than human Teaching Assistants (TAs) (who in contrast, need to be fed pizza).</p>
<p>Given that I’ll be Head TAing a class with nearly 300 students this fall, I can’t afford enough pizzas to keep my team running. Or maybe I can, but I prefer not to. So why not get CI servers to grade homeworks? That requires two things:</p>
<ol style="list-style-type: decimal">
<li>Getting students on GitHub (and submitting homeworks via GitHub)</li>
<li>Grading those homeworks on GitHub</li>
</ol>
<p>I’ll talk about (1) in a later post when I have the system fully set up, but basically it involves playing nice to GitHub and getting a team with lots and lots of private repositories. Then you give each student one private repository (so that they can’t copy. But then again, since they’re all on GitHub, it should be easy to implement a cheat check. That’s for next time).</p>
<h2 id="homework-assignment">Homework Assignment</h2>
<p>Let’s say that the student is supposed to write an assignment like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FibonacciRecursive</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(fibonacci(<span class="number">5</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">fibonacci</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// this is the method that student codes up</span></span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This happens in a file called <code>FibonacciRecursive.java</code>. (Wow surprise).</p>
<p>This is usually one of the first assignments in a data structures class or a last assignment in an intro programming class. Whatever it is, we can be sure of the following:</p>
<ol style="list-style-type: decimal">
<li>You do not want to introduce unnecessary files into the homework package that the student works with. This confuses a student easily, and no good packaging software exists for Java which is as simple and intuitive as Grunt or NPM in JavaScript. You probably don’t want to use Maven or Ant.</li>
<li>You probably want to avoid unit tests, since they make it difficult for you to score the entire assignment, run asynchronously, and produce rather ugly output.</li>
</ol>
<p>Given those two limitations, you are set back by quite a bit, since most CI servers only run well on those systems. Give it Java with Maven and CircleCI (one of the larger CI services out there that provide free CI) will work like magic. However, give it non standard stuff and it coughs blood. Unfortunately, that bloody puddle is what we have to work with.</p>
<h2 id="setting-up-circleci">Setting up CircleCI</h2>
<p>(Side note: I chose CircleCI not TravisCI because Circle allows for private repositories while Travis insists on public).</p>
<p>Without a single unit test command, we have to be a little hacky with CircleCI. Now here’s how CircleCI runs in a nutshell:</p>
<ol style="list-style-type: decimal">
<li>CircleCI reads off <code>circle.yml</code> in your repository. If it finds that file, it follows the instructions in that file. Otherwise, it tries to infer your environment (be it some Ruby thingum, Maven for Java, or Grunt for JS).</li>
<li>It runs the commands in <code>circle.yml</code> or the inferred commands.</li>
<li>Specifically, in the unit test portion, it runs every command in the unit test portion. If all of them produces an exit code of 0 (that means everything’s good), the unit tests pass. If any of them produce a non-0 exit code, unit tests fail, you get an error.</li>
<li>The results of these get emailed to you.</li>
</ol>
<p>That sounds cool right? So let’s start appropriating that system for homework grading.</p>
<h2 id="game-plan">Game Plan</h2>
<p>Your directory will end up containing</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- FibonacciRecursive.java</span><br><span class="line">- Grader.java</span><br><span class="line">- build.sh</span><br><span class="line">- circle.yml</span><br></pre></td></tr></table></figure>
<p>Here’s how everything works:</p>
<ol style="list-style-type: decimal">
<li>CircleCI reads <code>circle.yml</code> which tells the server to run <code>build.sh</code> instead of running standard unit tests</li>
<li><code>build.sh</code> does the following
<ol style="list-style-type: decimal">
<li>It tries to compile <code>FibonacciRecursive.java</code> and <code>Grader.java</code></li>
<li>It runs Grader (now compiled as a class). Grader runs a series of tests on FibonacciRecursive, printing out the score that the student receives along each step. Depending on the score, Grader returns with an exit code of either 0 or 1.</li>
</ol></li>
<li><code>build.sh</code> returns whatever exit code Grader returns.</li>
<li>CircleCI consumes that exit code.</li>
</ol>
<p>And this is how we’ll abuse CircleCI to grade homeworks.</p>
<h2 id="overriding-circle.yml">Overriding <code>circle.yml</code></h2>
<p>We know that we have to override <code>circle.yml</code> to not try and run Maven / Ant / freeze up and die when we run our custom Java stuff. What’s simpler than making it run a <code>.sh</code> script?</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Customize the test machine</span></span><br><span class="line"><span class="attr">machine:</span></span><br><span class="line">  <span class="comment"># Version of java to use</span></span><br><span class="line"><span class="attr">  java:</span></span><br><span class="line"><span class="attr">    version:</span> <span class="string">oraclejdk8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Customize test commands</span></span><br><span class="line"><span class="attr">test:</span></span><br><span class="line"><span class="attr">  override:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">sh</span> <span class="string">build.sh</span></span><br></pre></td></tr></table></figure>
<p>That’s all that should go into your <code>circle.yml</code>.</p>
<h2 id="creating-build.sh">Creating <code>build.sh</code></h2>
<p>Now your <code>build.sh</code> should just compile every <code>.java</code> file in your directory and run Grader. So that’s exactly what it does:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javac *.java</span><br><span class="line">java Grader</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<h2 id="creating-a-grader-tool-in-java">Creating a Grader Tool in Java</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Grader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> score = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> scoreMax = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Fibonacci</span></span><br><span class="line">        <span class="comment">// Test 0</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(<span class="number">0</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 1 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Test 1</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(<span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 2 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Test 5</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(<span class="number">5</span>) == <span class="number">5</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 3 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Test 10</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(<span class="number">10</span>) == <span class="number">55</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 4 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Test -1</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(-<span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 5 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (score != scoreMax) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Score: "</span> + score + <span class="string">"/"</span> + scoreMax);</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"Score: "</span> + score + <span class="string">"/"</span> + scoreMax);</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This should be rather self explanatory – you’re basically making a series of “assertions”, but tabulating scores at the same time.</p>
<h2 id="pushing-to-github">Pushing to GitHub</h2>
<p>We push all this code to a GitHub repository:</p>
<p><a href="https://github.com/linanqiu/circle-ci-java-assignment-grading" class="uri" target="_blank" rel="noopener">https://github.com/linanqiu/circle-ci-java-assignment-grading</a></p>
<h2 id="setting-up-circleci-1">Setting up CircleCI</h2>
<p>Add your repository on CircleCI after you’ve set up an account.</p>
<div class="figure">
<img src="/images/Using-CircleCI-to-Grade-Java-Assignments/circleci1.png">

</div>
<div class="figure">
<img src="/images/Using-CircleCI-to-Grade-Java-Assignments/circleci2.png">

</div>
<p>You’ll see that the build has started.</p>
<div class="figure">
<img src="/images/Using-CircleCI-to-Grade-Java-Assignments/circleci3.png">

</div>
<p>And you should get the results of <code>Grader.java</code> being run on <code>FibonacciRecursive.java</code> as a result of <code>build.sh</code> being run as told by <code>circle.yml</code> (Phew)</p>
<div class="figure">
<img src="/images/Using-CircleCI-to-Grade-Java-Assignments/circleci4.png">

</div>
<h2 id="grade-on-commit">Grade On Commit</h2>
<p>It shows that we’ve failed the assignment and didn’t get full marks. Well obviously, since we made <code>Test 5</code> in the Grader an errorneous test. It should be producing 0 instead of 1. Let’s change that line:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Grader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> score = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> scoreMax = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Fibonacci</span></span><br><span class="line">        <span class="comment">// Test 0</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(<span class="number">0</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 1 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Test 1</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(<span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 2 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Test 5</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(<span class="number">5</span>) == <span class="number">5</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 3 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Test 10</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(<span class="number">10</span>) == <span class="number">55</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 4 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Test -1</span></span><br><span class="line">        <span class="comment">// Modified</span></span><br><span class="line">        <span class="keyword">if</span> (FibonacciRecursive.fibonacci(-<span class="number">1</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Test 5 Passed +10"</span>);</span><br><span class="line">            score += <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (score != scoreMax) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Score: "</span> + score + <span class="string">"/"</span> + scoreMax);</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"Score: "</span> + score + <span class="string">"/"</span> + scoreMax);</span><br><span class="line">            System.exit(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We make this modification, and submit. We see that CircleCI has already seen the new commit and started building it:</p>
<div class="figure">
<img src="/images/Using-CircleCI-to-Grade-Java-Assignments/circleci5.png">

</div>
<p>Seems like the problem has been fixed! And this happened without us intervening (and no pizzas involved).</p>
<div class="figure">
<img src="/images/Using-CircleCI-to-Grade-Java-Assignments/circleci6.png">

</div>
<p>Isn’t this awesome? Even awesome-er, CircleCI has a great API. That means you can use this to create a live scoreboard for your students / email notifications every time they submit code.</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/linanqiu">Projects</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#homework-assignment"><span class="toc-number">1.</span> <span class="toc-text">Homework Assignment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setting-up-circleci"><span class="toc-number">2.</span> <span class="toc-text">Setting up CircleCI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#game-plan"><span class="toc-number">3.</span> <span class="toc-text">Game Plan</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#overriding-circle.yml"><span class="toc-number">4.</span> <span class="toc-text">Overriding circle.yml</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#creating-build.sh"><span class="toc-number">5.</span> <span class="toc-text">Creating build.sh</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#creating-a-grader-tool-in-java"><span class="toc-number">6.</span> <span class="toc-text">Creating a Grader Tool in Java</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pushing-to-github"><span class="toc-number">7.</span> <span class="toc-text">Pushing to GitHub</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setting-up-circleci-1"><span class="toc-number">8.</span> <span class="toc-text">Setting up CircleCI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#grade-on-commit"><span class="toc-number">9.</span> <span class="toc-text">Grade On Commit</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&text=Using CircleCI to Grade Java Assignments"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&is_video=false&description=Using CircleCI to Grade Java Assignments"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Using CircleCI to Grade Java Assignments&body=Check out this article: http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&title=Using CircleCI to Grade Java Assignments"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://linanqiu.github.io/2015/08/21/Using-CircleCI-to-Grade-Java-Assignments/&name=Using CircleCI to Grade Java Assignments&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 Linan Qiu
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/linanqiu">Projects</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


