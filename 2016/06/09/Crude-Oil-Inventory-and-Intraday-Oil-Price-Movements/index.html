<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Crude Oil Inventory and Intraday Oil Price Movements | Pandamonium | Musings of a Panda</title>
  <meta name="author" content="Linan Qiu">
  
  <meta name="description" content="Linan&#39;s Blog">
  
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Crude Oil Inventory and Intraday Oil Price Movements"/>
  <meta property="og:site_name" content="Pandamonium"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Pandamonium" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div id="page" class="site">
  <div id="primary" class="content-area">

    <header id="header" class="inner"><div class="site-branding">
  <h1 class="site-title">
    <a href="/">Pandamonium</a>
  </h1>
  <p class="site-description">Musings of a Panda</p>
</div>
<nav id="site-navigation" class="main-navigation" role="navigation">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
</nav></header>

    <article id="content" class="site-content">
      <main id="main" class="site-main posts-loop" role="main">
        <article class="post article">

  
  
    <h3 class="article-title"><span>Crude Oil Inventory and Intraday Oil Price Movements</span></h3>
  


  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/06/09/Crude-Oil-Inventory-and-Intraday-Oil-Price-Movements/" rel="bookmark">
        <time class="entry-date published" datetime="2016-06-09T14:21:50.000Z">
          2016-06-09
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">%matplotlib inline</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line">plt.style.use(<span class="string">'ggplot'</span>)</div><div class="line">%config InlineBackend.figure_format = <span class="string">'svg'</span></div></pre></td></tr></table></figure>
<h1 id="motivation">Motivation</h1>
<p><a href="http://www.wsj.com/articles/oil-at-seven-month-high-as-u-s-stockpiles-drop-1464168624" target="_blank" rel="external">News</a> <a href="http://www.marketwatch.com/story/oil-prices-march-past-50-amid-signs-of-us-inventory-falls-2016-06-08" target="_blank" rel="external">articles</a> love citing the crude inventory as reasons for movements in oil prices. Quoting from the WSJ:</p>
<blockquote>
<p>U.S. inventories are closely watched by traders as the first indicator of the global supply-and-demand balance. Stockpiles have fallen in recent weeks from their highest level in more than 80 years, boosting expectations that the global glut of crude that has weighed on prices for nearly two years is now receding.</p>
</blockquote>
<blockquote>
<p>The U.S. Energy Information Administration said U.S. crude stockpiles fell 4.2 million barrels last week, while analysts polled by The Wall Street Journal had expected a decrease of 2.5 million barrels.</p>
</blockquote>
<p>So this got me really curious. How good is the Energy Information Administration (EIA) figure as a predictor of crude oil prices? To test this, I decided to use the following data:</p>
<ol style="list-style-type: decimal">
<li>EIA US Crude Inventory ex-SPR (Strategic Petroleum Reserve). This data (basically the one that WSJ quoted on top) is <strong>usually released every Wednesday afternoon</strong>. This data is going to be a single number for every week.</li>
<li>US Oil Fund (USO), an ETF that tracks the front month West Texas Intermediate (WTI) futures. This is going to be a set of numbers daily describing the <strong>open, high, low, close</strong> (OHLC) prices. We are most interested in the extent of movement from the beginning of the day (before EIA data is released) to the end of the day (after EIA data is released). Hence, we define <strong>intraday return</strong> as <strong>(close - open) / close</strong> for a specific day. Furthermore, we are probably interested in this figure for <strong>Wednesdays</strong> given that EIA data is released every Wednesday.</li>
</ol>
<h1 id="data">Data</h1>
<p>I pull the data from Thomson Datastream using this <a href="https://github.com/vfilimonov/pydatastream" target="_blank" rel="external">wonderful Python interface</a>. If you want to replicate this, you’d need to get yourself some Datastream credentials. Ask your school librarian very nicely. :)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pydatastream</div><div class="line"><span class="keyword">from</span> pydatastream <span class="keyword">import</span> Datastream</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> csv</div><div class="line"><span class="keyword">import</span> pandas</div><div class="line"><span class="keyword">import</span> statsmodels.graphics.tsaplots <span class="keyword">as</span> tsaplots</div><div class="line"><span class="keyword">import</span> statsmodels.formula.api <span class="keyword">as</span> sm</div><div class="line"></div><div class="line">credentials = &#123;&#125;</div><div class="line"><span class="keyword">with</span> open(<span class="string">'credentials.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> credentials_file:</div><div class="line">    line = credentials_file.readline().split(<span class="string">','</span>)</div><div class="line">    credentials[<span class="string">'username'</span>] = line[<span class="number">0</span>]</div><div class="line">    credentials[<span class="string">'password'</span>] = line[<span class="number">1</span>]</div><div class="line"></div><div class="line">DWE = Datastream(username=credentials[<span class="string">'username'</span>], password=credentials[<span class="string">'password'</span>])</div><div class="line">DWE.raise_on_error = <span class="keyword">False</span></div></pre></td></tr></table></figure>
<p>The crude oil inventory data has the datastream mnemonic <code>EIA2007</code> (trust me it took me like 2 hours to find it.) Then I plot it to inject some pictures into this post (otherwise you’d find it boring right?) Besides everyone likes pictures.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">crude_oil_stock = DWE.fetch([<span class="string">'EIA2007'</span>], date_from=<span class="string">'2000-01-01'</span>, freq=<span class="string">'D'</span>)</div><div class="line">uso = DWE.get_OHLC(<span class="string">'U:USO'</span>, date_from=<span class="string">'2000-01-01'</span>)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">crude_oil_stock.plot()</div></pre></td></tr></table></figure>
<div class="figure">
<img src="/images/Crude-Oil-Inventory-and-Intraday-Oil-Price-Movements/output_6_1.svg" alt="svg">
<p class="caption">svg</p>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">uso.plot()</div></pre></td></tr></table></figure>
<div class="figure">
<img src="/images/Crude-Oil-Inventory-and-Intraday-Oil-Price-Movements/output_7_1.svg" alt="svg">
<p class="caption">svg</p>
</div>
<p>Uh oh looks like we don’t have complete data before late 2009. Oh well. We just truncate our analysis then.</p>
<p>Now let’s subdivide our data into each of the days of the week: Monday till Friday.</p>
<p>Also, Thomson Datastream’s crude oil stock data seems to be lagged by 2 days. That is, Wednesday’s data seems to only be in the system by Friday. Hence, I shift the inventory data by <code>-2</code> days.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">data = crude_oil_stock.merge(uso, left_index=<span class="keyword">True</span>, right_index=<span class="keyword">True</span>)</div><div class="line">data.columns=[<span class="string">'crude_oil_stock'</span>, <span class="string">'uso_close'</span>, <span class="string">'uso_high'</span>, <span class="string">'uso_low'</span>, <span class="string">'uso_open'</span>]</div><div class="line">data[<span class="string">'dayofweek'</span>] = data.index.dayofweek</div><div class="line">data[<span class="string">'crude_oil_stock'</span>] = data[<span class="string">'crude_oil_stock'</span>].shift(<span class="number">-2</span>)</div><div class="line">data = data.dropna()</div><div class="line"></div><div class="line">data_daily = &#123;&#125;</div><div class="line"><span class="keyword">for</span> dayofweek <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">5</span>):</div><div class="line">    data_daily[dayofweek] = data[data.index.dayofweek == dayofweek]</div><div class="line">    data_daily[dayofweek][<span class="string">'uso_intraday_return'</span>] = (data_daily[dayofweek][<span class="string">'uso_close'</span>] - data_daily[dayofweek][<span class="string">'uso_open'</span>]) / data_daily[dayofweek][<span class="string">'uso_open'</span>]</div><div class="line">    data_daily[dayofweek][<span class="string">'crude_oil_stock_pct'</span>] = data_daily[dayofweek][<span class="string">'crude_oil_stock'</span>].pct_change()</div><div class="line">    data_daily[dayofweek][<span class="string">'crude_oil_stock_diff'</span>] = data_daily[dayofweek][<span class="string">'crude_oil_stock'</span>].diff()</div><div class="line">    data_daily[dayofweek] = data_daily[dayofweek].dropna()</div></pre></td></tr></table></figure>
<p>We have all the fields that we need for our analysis. They should be pretty self explanatory.</p>
<h1 id="analysis">Analysis</h1>
<p>First we do scatter plots of <code>crude_oil_stock_pct</code>, the percent change of this week’s crude inventory stock on last week’s inventory stock, on <code>uso_intraday_return</code>, the intraday return. Turns out not much of a relationship exists:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> dayofweek <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">5</span>):</div><div class="line">    data_daily[dayofweek].plot(kind=<span class="string">'scatter'</span>, x=<span class="string">'crude_oil_stock_pct'</span>, y=<span class="string">'uso_intraday_return'</span>)</div><div class="line">plt.show()</div></pre></td></tr></table></figure>
<div class="figure">
<img src="/images/Crude-Oil-Inventory-and-Intraday-Oil-Price-Movements/output_13_0.svg" alt="svg">
<p class="caption">svg</p>
</div>
<div class="figure">
<img src="/images/Crude-Oil-Inventory-and-Intraday-Oil-Price-Movements/output_13_1.svg" alt="svg">
<p class="caption">svg</p>
</div>
<div class="figure">
<img src="/images/Crude-Oil-Inventory-and-Intraday-Oil-Price-Movements/output_13_2.svg" alt="svg">
<p class="caption">svg</p>
</div>
<div class="figure">
<img src="/images/Crude-Oil-Inventory-and-Intraday-Oil-Price-Movements/output_13_3.svg" alt="svg">
<p class="caption">svg</p>
</div>
<div class="figure">
<img src="/images/Crude-Oil-Inventory-and-Intraday-Oil-Price-Movements/output_13_4.svg" alt="svg">
<p class="caption">svg</p>
</div>
<p>When I ran OLS regressions on each of them, not only are the R-squared pathetic, the slopes are in entirely wrong direction as well. For example, the slope for Wednesdays is 0.734359432686, which means that oil prices tend to increase intraday when the inventory increases.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> dayofweek <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">5</span>):</div><div class="line">    model = sm.ols(formula=<span class="string">'uso_intraday_return ~ crude_oil_stock_pct'</span>, data=data_daily[dayofweek])</div><div class="line">    results = model.fit()</div><div class="line">    print(<span class="string">'Day Of Week '</span> + str(dayofweek))</div><div class="line">    print(<span class="string">'Slope '</span> + str(results.params.crude_oil_stock_pct))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Day Of Week 0</div><div class="line">Slope 0.0959621772799</div><div class="line">Day Of Week 1</div><div class="line">Slope -0.202762367053</div><div class="line">Day Of Week 2</div><div class="line">Slope 0.734359432686</div><div class="line">Day Of Week 3</div><div class="line">Slope 0.482402080895</div><div class="line">Day Of Week 4</div><div class="line">Slope 0.179556901751</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> dayofweek <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">5</span>):</div><div class="line">    model = sm.ols(formula=<span class="string">'uso_intraday_return ~ crude_oil_stock_pct'</span>, data=data_daily[dayofweek])</div><div class="line">    results = model.fit()</div><div class="line">    print(<span class="string">'Day Of Week '</span> + str(dayofweek))</div><div class="line">    print(<span class="string">''</span>)</div><div class="line">    print(results.summary())</div></pre></td></tr></table></figure>
<pre><code>Day Of Week 0

                             OLS Regression Results                            
===============================================================================
Dep. Variable:     uso_intraday_return   R-squared:                       0.001
Model:                             OLS   Adj. R-squared:                 -0.002
Method:                  Least Squares   F-statistic:                    0.2613
Date:                 Thu, 09 Jun 2016   Prob (F-statistic):              0.610
Time:                         22:34:39   Log-Likelihood:                 932.68
No. Observations:                  329   AIC:                            -1861.
Df Residuals:                      327   BIC:                            -1854.
Df Model:                            1                                         
Covariance Type:             nonrobust                                         
=======================================================================================
                          coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]
---------------------------------------------------------------------------------------
Intercept              -0.0001      0.001     -0.177      0.859        -0.002     0.001
crude_oil_stock_pct     0.0960      0.188      0.511      0.610        -0.273     0.465
==============================================================================
Omnibus:                       46.601   Durbin-Watson:                   1.846
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              268.062
Skew:                           0.364   Prob(JB):                     6.18e-59
Kurtosis:                       7.362   Cond. No.                         239.
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
Day Of Week 1

                             OLS Regression Results                            
===============================================================================
Dep. Variable:     uso_intraday_return   R-squared:                       0.003
Model:                             OLS   Adj. R-squared:                  0.000
Method:                  Least Squares   F-statistic:                     1.144
Date:                 Thu, 09 Jun 2016   Prob (F-statistic):              0.285
Time:                         22:34:39   Log-Likelihood:                 1035.4
No. Observations:                  359   AIC:                            -2067.
Df Residuals:                      357   BIC:                            -2059.
Df Model:                            1                                         
Covariance Type:             nonrobust                                         
=======================================================================================
                          coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]
---------------------------------------------------------------------------------------
Intercept               0.0002      0.001      0.302      0.763        -0.001     0.002
crude_oil_stock_pct    -0.2028      0.190     -1.070      0.285        -0.576     0.170
==============================================================================
Omnibus:                        8.913   Durbin-Watson:                   1.929
Prob(Omnibus):                  0.012   Jarque-Bera (JB):               14.310
Skew:                          -0.117   Prob(JB):                     0.000781
Kurtosis:                       3.950   Cond. No.                         265.
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
Day Of Week 2

                             OLS Regression Results                            
===============================================================================
Dep. Variable:     uso_intraday_return   R-squared:                       0.028
Model:                             OLS   Adj. R-squared:                  0.026
Method:                  Least Squares   F-statistic:                     10.44
Date:                 Thu, 09 Jun 2016   Prob (F-statistic):            0.00134
Time:                         22:34:39   Log-Likelihood:                 963.67
No. Observations:                  359   AIC:                            -1923.
Df Residuals:                      357   BIC:                            -1916.
Df Model:                            1                                         
Covariance Type:             nonrobust                                         
=======================================================================================
                          coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]
---------------------------------------------------------------------------------------
Intercept            4.491e-05      0.001      0.051      0.959        -0.002     0.002
crude_oil_stock_pct     0.7344      0.227      3.232      0.001         0.287     1.181
==============================================================================
Omnibus:                       18.131   Durbin-Watson:                   2.048
Prob(Omnibus):                  0.000   Jarque-Bera (JB):               29.969
Skew:                           0.335   Prob(JB):                     3.11e-07
Kurtosis:                       4.247   Cond. No.                         260.
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
Day Of Week 3

                             OLS Regression Results                            
===============================================================================
Dep. Variable:     uso_intraday_return   R-squared:                       0.014
Model:                             OLS   Adj. R-squared:                  0.012
Method:                  Least Squares   F-statistic:                     5.126
Date:                 Thu, 09 Jun 2016   Prob (F-statistic):             0.0242
Time:                         22:34:39   Log-Likelihood:                 968.11
No. Observations:                  352   AIC:                            -1932.
Df Residuals:                      350   BIC:                            -1924.
Df Model:                            1                                         
Covariance Type:             nonrobust                                         
=======================================================================================
                          coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]
---------------------------------------------------------------------------------------
Intercept              -0.0004      0.001     -0.500      0.618        -0.002     0.001
crude_oil_stock_pct     0.4824      0.213      2.264      0.024         0.063     0.901
==============================================================================
Omnibus:                       32.562   Durbin-Watson:                   2.031
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              120.200
Skew:                          -0.274   Prob(JB):                     7.92e-27
Kurtosis:                       5.810   Cond. No.                         258.
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
Day Of Week 4

                             OLS Regression Results                            
===============================================================================
Dep. Variable:     uso_intraday_return   R-squared:                       0.003
Model:                             OLS   Adj. R-squared:                 -0.000
Method:                  Least Squares   F-statistic:                    0.8663
Date:                 Thu, 09 Jun 2016   Prob (F-statistic):              0.353
Time:                         22:34:39   Log-Likelihood:                 991.29
No. Observations:                  347   AIC:                            -1979.
Df Residuals:                      345   BIC:                            -1971.
Df Model:                            1                                         
Covariance Type:             nonrobust                                         
=======================================================================================
                          coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]
---------------------------------------------------------------------------------------
Intercept               0.0009      0.001      1.153      0.250        -0.001     0.002
crude_oil_stock_pct     0.1796      0.193      0.931      0.353        -0.200     0.559
==============================================================================
Omnibus:                       56.151   Durbin-Watson:                   2.035
Prob(Omnibus):                  0.000   Jarque-Bera (JB):              254.440
Skew:                           0.577   Prob(JB):                     5.61e-56
Kurtosis:                       7.033   Cond. No.                         258.
==============================================================================

Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
<h1 id="conclusion">Conclusion</h1>
<p>EIA inventory data is probably a weak predictor in and of itself. We can add more factors (momentum, etc) but the correlation’s definitely not as clear cut as most news agencies would like to claim.</p>

      
    </div>
    <footer class="article-footer">
        <div class="article-meta pull-left">
          
          
        </div>
        
    </footer>
  </div>
</article>

  



      </main>
    </article>

    <footer id="colophon" class="site-footer" role="contentinfo"><p class="site-info">
  Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
  Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
  </br>
  
  &copy; 2018 Linan Qiu
  
</p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66827435-1', 'auto');
    ga('send', 'pageview');

</script>

  </div>
</div>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</body>
</html>
